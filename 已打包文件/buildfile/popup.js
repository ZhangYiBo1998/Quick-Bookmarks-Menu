var ye=Object.defineProperty,Je=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var Ce=(e,t,o)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,S=(e,t)=>{for(var o in t||(t={}))Ze.call(t,o)&&Ce(e,o,t[o]);if(be)for(var o of be(t))et.call(t,o)&&Ce(e,o,t[o]);return e},xe=(e,t)=>Je(e,Ke(t));var s=(e,t)=>ye(e,"name",{value:t,configurable:!0});var G,y,Pe,tt,O,we,Me,ae,Ee,F={},He=[],ot=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,se=Array.isArray;function W(e,t){for(var o in t)e[o]=t[o];return e}s(W,"v");function Ie(e){var t=e.parentNode;t&&t.removeChild(e)}s(Ie,"p");function m(e,t,o){var r,a,i,c={};for(i in t)i=="key"?r=t[i]:i=="ref"?a=t[i]:c[i]=t[i];if(arguments.length>2&&(c.children=arguments.length>3?G.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)c[i]===void 0&&(c[i]=e.defaultProps[i]);return Q(e,c,r,a,null)}s(m,"y");function Q(e,t,o,r,a){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++Pe};return a==null&&y.vnode!=null&&y.vnode(i),i}s(Q,"d");function U(e){return e.children}s(U,"k");function Y(e,t){this.props=e,this.context=t}s(Y,"b");function z(e,t){if(t==null)return e.__?z(e.__,e.__.__k.indexOf(e)+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?z(e):null}s(z,"g");function Ne(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Ne(e)}}s(Ne,"m");function ce(e){(!e.__d&&(e.__d=!0)&&O.push(e)&&!X.__r++||we!==y.debounceRendering)&&((we=y.debounceRendering)||Me)(X)}s(ce,"w");function X(){var e,t,o,r,a,i,c,u,p;for(O.sort(ae);e=O.shift();)e.__d&&(t=O.length,r=void 0,a=void 0,i=void 0,u=(c=(o=e).__v).__e,(p=o.__P)&&(r=[],a=[],(i=W({},c)).__v=c.__v+1,le(p,c,i,o.__n,p.ownerSVGElement!==void 0,c.__h!=null?[u]:null,r,u??z(c),c.__h,a),Oe(r,c,a),c.__e!=u&&Ne(c)),O.length>t&&O.sort(ae));X.__r=0}s(X,"x");function Le(e,t,o,r,a,i,c,u,p,v,f){var n,_,d,l,h,k,g,b,w,E=0,P=r&&r.__k||He,I=P.length,B=I,A=t.length;for(o.__k=[],n=0;n<A;n++)(l=o.__k[n]=(l=t[n])==null||typeof l=="boolean"||typeof l=="function"?null:typeof l=="string"||typeof l=="number"||typeof l=="bigint"?Q(null,l,null,null,l):se(l)?Q(U,{children:l},null,null,null):l.__b>0?Q(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l)!=null?(l.__=o,l.__b=o.__b+1,(b=nt(l,P,g=n+E,B))===-1?d=F:(d=P[b]||F,P[b]=void 0,B--),le(e,l,d,a,i,c,u,p,v,f),h=l.__e,(_=l.ref)&&d.ref!=_&&(d.ref&&ue(d.ref,null,l),f.push(_,l.__c||h,l)),h!=null&&(k==null&&(k=h),(w=d===F||d.__v===null)?b==-1&&E--:b!==g&&(b===g+1?E++:b>g?B>A-g?E+=b-g:E--:E=b<g&&b==g-1?b-g:0),g=n+E,typeof l.type!="function"||b===g&&d.__k!==l.__k?typeof l.type=="function"||b===g&&!w?l.__d!==void 0?(p=l.__d,l.__d=void 0):p=h.nextSibling:p=Te(e,h,p):p=Be(l,p,e),typeof o.type=="function"&&(o.__d=p))):(d=P[n])&&d.key==null&&d.__e&&(d.__e==p&&(p=z(d)),_e(d,d,!1),P[n]=null);for(o.__e=k,n=I;n--;)P[n]!=null&&(typeof o.type=="function"&&P[n].__e!=null&&P[n].__e==o.__d&&(o.__d=P[n].__e.nextSibling),_e(P[n],P[n]))}s(Le,"P");function Be(e,t,o){for(var r,a=e.__k,i=0;a&&i<a.length;i++)(r=a[i])&&(r.__=e,t=typeof r.type=="function"?Be(r,t,o):Te(o,r.__e,t));return t}s(Be,"$");function Te(e,t,o){return o==null||o.parentNode!==e?e.insertBefore(t,null):t==o&&t.parentNode!=null||e.insertBefore(t,o),t.nextSibling}s(Te,"S");function nt(e,t,o,r){var a=e.key,i=e.type,c=o-1,u=o+1,p=t[o];if(p===null||p&&a==p.key&&i===p.type)return o;if(r>(p!=null?1:0))for(;c>=0||u<t.length;){if(c>=0){if((p=t[c])&&a==p.key&&i===p.type)return c;c--}if(u<t.length){if((p=t[u])&&a==p.key&&i===p.type)return u;u++}}return-1}s(nt,"A");function rt(e,t,o,r,a){var i;for(i in o)i==="children"||i==="key"||i in t||J(e,i,null,o[i],r);for(i in t)a&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||o[i]===t[i]||J(e,i,t[i],o[i],r)}s(rt,"H");function Ae(e,t,o){t[0]==="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||ot.test(t)?o:o+"px"}s(Ae,"I");function J(e,t,o,r,a){var i;e:if(t==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||Ae(e.style,t,"");if(o)for(t in o)r&&o[t]===r[t]||Ae(e.style,t,o[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?r||e.addEventListener(t,i?We:Se,i):e.removeEventListener(t,i?We:Se,i);else if(t!=="dangerouslySetInnerHTML"){if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,o))}}s(J,"T");function Se(e){return this.l[e.type+!1](y.event?y.event(e):e)}s(Se,"j");function We(e){return this.l[e.type+!0](y.event?y.event(e):e)}s(We,"z");function le(e,t,o,r,a,i,c,u,p,v){var f,n,_,d,l,h,k,g,b,w,E,P,I,B,A,H=t.type;if(t.constructor!==void 0)return null;o.__h!=null&&(p=o.__h,u=t.__e=o.__e,t.__h=null,i=[u]),(f=y.__b)&&f(t);e:if(typeof H=="function")try{if(g=t.props,b=(f=H.contextType)&&r[f.__c],w=f?b?b.props.value:f.__:r,o.__c?k=(n=t.__c=o.__c).__=n.__E:("prototype"in H&&H.prototype.render?t.__c=n=new H(g,w):(t.__c=n=new Y(g,w),n.constructor=H,n.render=at),b&&b.sub(n),n.props=g,n.state||(n.state={}),n.context=w,n.__n=r,_=n.__d=!0,n.__h=[],n._sb=[]),n.__s==null&&(n.__s=n.state),H.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=W({},n.__s)),W(n.__s,H.getDerivedStateFromProps(g,n.__s))),d=n.props,l=n.state,n.__v=t,_)H.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(H.getDerivedStateFromProps==null&&g!==d&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(g,w),!n.__e&&(n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(g,n.__s,w)===!1||t.__v===o.__v)){for(t.__v!==o.__v&&(n.props=g,n.state=n.__s,n.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.forEach(function(D){D&&(D.__=t)}),E=0;E<n._sb.length;E++)n.__h.push(n._sb[E]);n._sb=[],n.__h.length&&c.push(n);break e}n.componentWillUpdate!=null&&n.componentWillUpdate(g,n.__s,w),n.componentDidUpdate!=null&&n.__h.push(function(){n.componentDidUpdate(d,l,h)})}if(n.context=w,n.props=g,n.__P=e,n.__e=!1,P=y.__r,I=0,"prototype"in H&&H.prototype.render){for(n.state=n.__s,n.__d=!1,P&&P(t),f=n.render(n.props,n.state,n.context),B=0;B<n._sb.length;B++)n.__h.push(n._sb[B]);n._sb=[]}else do n.__d=!1,P&&P(t),f=n.render(n.props,n.state,n.context),n.state=n.__s;while(n.__d&&++I<25);n.state=n.__s,n.getChildContext!=null&&(r=W(W({},r),n.getChildContext())),_||n.getSnapshotBeforeUpdate==null||(h=n.getSnapshotBeforeUpdate(d,l)),Le(e,se(A=f!=null&&f.type===U&&f.key==null?f.props.children:f)?A:[A],t,o,r,a,i,c,u,p,v),n.base=t.__e,t.__h=null,n.__h.length&&c.push(n),k&&(n.__E=n.__=null)}catch(D){t.__v=null,(p||i!=null)&&(t.__e=u,t.__h=!!p,i[i.indexOf(u)]=null),y.__e(D,t,o)}else i==null&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=it(o.__e,t,o,r,a,i,c,p,v);(f=y.diffed)&&f(t)}s(le,"L");function Oe(e,t,o){for(var r=0;r<o.length;r++)ue(o[r],o[++r],o[++r]);y.__c&&y.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){y.__e(i,a.__v)}})}s(Oe,"M");function it(e,t,o,r,a,i,c,u,p){var v,f,n,_=o.props,d=t.props,l=t.type,h=0;if(l==="svg"&&(a=!0),i!=null){for(;h<i.length;h++)if((v=i[h])&&"setAttribute"in v==!!l&&(l?v.localName===l:v.nodeType===3)){e=v,i[h]=null;break}}if(e==null){if(l===null)return document.createTextNode(d);e=a?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l,d.is&&d),i=null,u=!1}if(l===null)_===d||u&&e.data===d||(e.data=d);else{if(i=i&&G.call(e.childNodes),f=(_=o.props||F).dangerouslySetInnerHTML,n=d.dangerouslySetInnerHTML,!u){if(i!=null)for(_={},h=0;h<e.attributes.length;h++)_[e.attributes[h].name]=e.attributes[h].value;(n||f)&&(n&&(f&&n.__html==f.__html||n.__html===e.innerHTML)||(e.innerHTML=n&&n.__html||""))}if(rt(e,d,_,a,u),n)t.__k=[];else if(Le(e,se(h=t.props.children)?h:[h],t,o,r,a&&l!=="foreignObject",i,c,i?i[0]:o.__k&&z(o,0),u,p),i!=null)for(h=i.length;h--;)i[h]!=null&&Ie(i[h]);u||("value"in d&&(h=d.value)!==void 0&&(h!==e.value||l==="progress"&&!h||l==="option"&&h!==_.value)&&J(e,"value",h,_.value,!1),"checked"in d&&(h=d.checked)!==void 0&&h!==e.checked&&J(e,"checked",h,_.checked,!1))}return e}s(it,"N");function ue(e,t,o){try{typeof e=="function"?e(t):e.current=t}catch(r){y.__e(r,o)}}s(ue,"O");function _e(e,t,o){var r,a;if(y.unmount&&y.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ue(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){y.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&_e(r[a],t,o||typeof e.type!="function");o||e.__e==null||Ie(e.__e),e.__=e.__e=e.__d=void 0}s(_e,"q");function at(e,t,o){return this.constructor(e,o)}s(at,"B");function De(e,t,o){var r,a,i,c;y.__&&y.__(e,t),a=(r=typeof o=="function")?null:o&&o.__k||t.__k,i=[],c=[],le(t,e=(!r&&o||t).__k=m(U,null,[e]),a||F,F,t.ownerSVGElement!==void 0,!r&&o?[o]:a?null:t.firstChild?G.call(t.childNodes):null,i,!r&&o?o:a?a.__e:t.firstChild,r,c),Oe(i,e,c)}s(De,"D");function R(e,t){var o={__c:t="__cC"+Ee++,__:e,Consumer:function(r,a){return r.children(a)},Provider:function(r){var a,i;return this.getChildContext||(a=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&a.some(function(u){u.__e=!0,ce(u)})},this.sub=function(c){a.push(c);var u=c.componentWillUnmount;c.componentWillUnmount=function(){a.splice(a.indexOf(c),1),u&&u.call(c)}}),r.children}};return o.Provider.__=o.Consumer.contextType=o}s(R,"G");G=He.slice,y={__e:function(e,t,o,r){for(var a,i,c;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),c=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,r||{}),c=a.__d),c)return a.__E=a}catch(u){e=u}throw e}},Pe=0,tt=s(function(e){return e!=null&&e.constructor===void 0},"t"),Y.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=W({},this.state),typeof e=="function"&&(e=e(W({},o),this.props)),e&&W(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),ce(this))},Y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ce(this))},Y.prototype.render=U,O=[],Me=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ae=s(function(e,t){return e.__v.__b-t.__v.__b},"f"),X.__r=0,Ee=0;var $,x,de,Fe,K=0,Ue=[],Z=[],$e=y.__b,Ve=y.__r,ze=y.diffed,Re=y.__c,qe=y.unmount;function ee(e,t){y.__h&&y.__h(x,e,K||t),K=0;var o=x.__H||(x.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({__V:Z}),o.__[e]}s(ee,"d");function C(e){return K=1,st(Qe,e)}s(C,"h");function st(e,t,o){var r=ee($++,2);if(r.t=e,!r.__c&&(r.__=[o?o(t):Qe(void 0,t),function(u){var p=r.__N?r.__N[0]:r.__[0],v=r.t(p,u);p!==v&&(r.__N=[v,r.__[1]],r.__c.setState({}))}],r.__c=x,!x.u)){var a=s(function(u,p,v){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(_){return _.__c});if(f.every(function(_){return!_.__N}))return!i||i.call(this,u,p,v);var n=!1;return f.forEach(function(_){if(_.__N){var d=_.__[0];_.__=_.__N,_.__N=void 0,d!==_.__[0]&&(n=!0)}}),!(!n&&r.__c.props===u)&&(!i||i.call(this,u,p,v))},"f");x.u=!0;var i=x.shouldComponentUpdate,c=x.componentWillUpdate;x.componentWillUpdate=function(u,p,v){if(this.__e){var f=i;i=void 0,a(u,p,v),i=f}c&&c.call(this,u,p,v)},x.shouldComponentUpdate=a}return r.__N||r.__}s(st,"s");function N(e,t){var o=ee($++,3);!y.__s&&Ge(o.__H,t)&&(o.__=e,o.i=t,x.__H.__h.push(o))}s(N,"p");function V(e){return K=5,ct(function(){return{current:e}},[])}s(V,"_");function ct(e,t){var o=ee($++,7);return Ge(o.__H,t)?(o.__V=e(),o.i=t,o.__h=e,o.__V):o.__}s(ct,"F");function M(e){var t=x.context[e.__c],o=ee($++,9);return o.c=e,t?(o.__==null&&(o.__=!0,t.sub(x)),t.props.value):e.__}s(M,"q");function lt(){for(var e;e=Ue.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(te),e.__H.__h.forEach(pe),e.__H.__h=[]}catch(t){e.__H.__h=[],y.__e(t,e.__v)}}s(lt,"b");y.__b=function(e){x=null,$e&&$e(e)},y.__r=function(e){Ve&&Ve(e),$=0;var t=(x=e.__c).__H;t&&(de===x?(t.__h=[],x.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=Z,o.__N=o.i=void 0})):(t.__h.forEach(te),t.__h.forEach(pe),t.__h=[],$=0)),de=x},y.diffed=function(e){ze&&ze(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Ue.push(t)!==1&&Fe===y.requestAnimationFrame||((Fe=y.requestAnimationFrame)||ut)(lt)),t.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==Z&&(o.__=o.__V),o.i=void 0,o.__V=Z})),de=x=null},y.__c=function(e,t){t.some(function(o){try{o.__h.forEach(te),o.__h=o.__h.filter(function(r){return!r.__||pe(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],y.__e(r,o.__v)}}),Re&&Re(e,t)},y.unmount=function(e){qe&&qe(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{te(r)}catch(a){t=a}}),o.__H=void 0,t&&y.__e(t,o.__v))};var je=typeof requestAnimationFrame=="function";function ut(e){var t,o=s(function(){clearTimeout(r),je&&cancelAnimationFrame(t),setTimeout(e)},"r"),r=setTimeout(o,100);je&&(t=requestAnimationFrame(o))}s(ut,"j");function te(e){var t=x,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),x=t}s(te,"k");function pe(e){var t=x;e.__c=e.__(),x=t}s(pe,"w");function Ge(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}s(Ge,"z");function Qe(e,t){return typeof t=="function"?t(e):t}s(Qe,"B");var T=R(()=>{}),L=R([{},()=>{}]),q=R(()=>{}),fe=R(()=>{});function me({nav:e,config:t,notify:o,hide:r,children:a}){return m(T.Provider,{value:e},m(L.Provider,{value:t},m(q.Provider,{value:o},m(fe.Provider,{value:r},a))))}s(me,"ContextWrapper");function he(e){let t=M(T),[o,r]=M(L),a=M(q),i={slow:800,medium:500,fast:200},c=s(()=>{t("folder",e.id)},"openFolder"),u=null;return m("button",{className:"bookmark-path",role:"link",tabIndex:0,onClick:s(()=>{e.last?chrome.bookmarks.getChildren(e.id,n=>{chrome.storage.local.set({startup:[e.id,n.length]}),a({target:e.title,action:chrome.i18n.getMessage("set_startup_done")})}):c()},"onClick"),onMouseOver:s(()=>{o.hoverEnter==="off"||e.last||(u=setTimeout(()=>c(),i[o.hoverEnter]))},"onMouseOver"),onMouseOut:s(()=>{u&&clearTimeout(u)},"onMouseOut"),title:e.last?chrome.i18n.getMessage("set_startup"):""},m("a",{className:"bookmark-path-text"},e.title))}s(he,"BookmarkPath");function _t(e){let t=setTimeout(()=>{clearTimeout(t),e.onClose()},1e3);return m("div",{className:"msg-banner"},e.msg.target&&m("span",{className:"msg-target"},e.msg.target),m("span",null,e.msg.action))}s(_t,"PopupMessage");function oe(e){let[t,o]=C([]),[r,a]=C(!0),[i,c]=C("0"),u=V(null),p=M(T),[v,f]=M(L);isNaN(v.root)&&(v.root="0");let n=s((k,g)=>{let b={id:k,title:""};chrome.bookmarks.get(k,w=>{if(b.title=w[0].title,k==="0"&&(b.title=chrome.i18n.getMessage("home")),g.unshift(b),k===v.root||!w[0].parentId){g[g.length-1].last=!0,o(g),r&&a(!1);return}n(w[0].parentId,g)})},"insertItem"),_=s(()=>{e.page.type==="folder"&&c(e.page.key),p("search",""),document.removeEventListener("keydown",_)},"toggleSearch");N(()=>{let k=t.length>0?t[t.length-1].id:"-1";if(e.page.type==="folder"&&e.page.key!=k){let g=[];n(e.page.key,g)}e.page.type==="search"&&u.current&&u.current.focus()},[e.page]),N(()=>{e.page.type==="folder"&&document.addEventListener("keydown",_)});let d=null,l=s(k=>{d&&clearTimeout(d),d=setTimeout(()=>{if(k.target instanceof HTMLInputElement){let g=k.target.value;g&&g.length>1&&p("search",g)}},400)},"onInput"),h=s(()=>{e.page.type!="search"?_():p("folder",i)},"switchView");return m("div",{className:`popup-header popup-header-${e.horiz?"horiz":"vert"}`},m("div",{className:`popup-header-path${r?" popup-header-path-empty":""} ${e.page.type==="folder"?"show-flex":"hide"}`},t.map(k=>m(he,S({},k)))),m("input",{className:`popup-header-search ${e.page.type==="search"?"show-flex":"hide"}`,type:"text",onInput:l,value:e.page.key,ref:u}),m("div",{className:`popup-header-hidden ${e.page.type==="hidden"?"show-inline":"hide"}`},chrome.i18n.getMessage("hidden_list")),m("div",{className:`popup-header-hidden ${e.page.type==="options"?"show-inline":"hide"}`},chrome.i18n.getMessage("options")),m("button",{className:"search-button",onClick:h,"aria-label":"toggle search"}),e.msgs.map(k=>m(_t,{msg:k,onClose:e.clearMsg})))}s(oe,"PopupHeader");function j(e){let t=M(T),[o]=M(L),r={slow:750,medium:450,fast:200},a=s(()=>t("folder",e.id),"openFolder"),i=s(_=>{let d="new";switch(_){case"middle":d=o.openInMiddle;break;case"left":d=o.openIn;break;default:break}let l=!1;switch(d){case"new":l=!0;case"background":chrome.tabs.create({url:e.url,active:l}),o.doNotClose!="background"&&o.doNotClose!="both"&&window.close();break;case"current":default:chrome.tabs.update({url:e.url}),o.doNotClose!="current"&&o.doNotClose!="both"&&window.close();break}},"openUrl"),c=s(()=>{switch(e.type){case"folder":a();break;case"link":case"manage":default:i("left");break}},"handleClick"),u=null,p=s(()=>{o.hoverEnter==="off"||e.type!="folder"||(u=setTimeout(()=>a(),r[o.hoverEnter]))},"handleMouseOver"),v=s(()=>{u&&clearTimeout(u)},"handleMouseOut"),f=s(_=>{_.button==1&&(_.preventDefault(),i("middle"))},"handleMouseUp"),n=s(_=>{_.button===1&&_.preventDefault()},"handleMouseDown");return m("div",{className:`bookmark-item${e.active?"":" bookmark-item-hide"} ${e.active||o.showHidden?"show-flex":"hide"}`,"data-id":e.id},m("button",{className:"bookmark-item-button",role:"link",tabIndex:0,title:e.type==="link"?e.title+`
`+e.url:"",type:e.type,onClick:c,onMouseOver:p,onMouseOut:v,onWheel:v,onMouseUp:f,onMouseDown:n},m("img",{className:`bookmark-item-icon bookmark-item-icon-${e.type}`,src:e.type==="link"?"chrome://favicon/"+e.url:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}),m("span",{className:"bookmark-item-text"},e.title)))}s(j,"BookmarkItem");function ge(e){return m("div",{className:`bookmark-list bookmark-list-${e.horiz?"horiz":"vert"} ${e.active?"show-grid":"hide"}`},e.list.map(t=>m(j,xe(S({},t),{key:t.id,type:t.url?"link":"folder",active:!e.hidden.includes(t.id)}))))}s(ge,"BookmarkList");function ve({name:e,storage:t,type:o,options:r}){let[a,i]=C(r[0].value),c=e.replace("_","-"),u=s(f=>{chrome.storage.local.set({[t]:f},()=>{i(f)}),e==="root_folder"&&chrome.storage.local.set({startup:[f,18]})},"saveValue"),p=s(f=>{f.currentTarget instanceof HTMLInputElement&&u(f.currentTarget.value)},"onRadioClickHandler"),v=s(f=>{f.currentTarget instanceof HTMLInputElement&&u(f.currentTarget.checked)},"onCheckboxClickHandler");return N(()=>{chrome.storage.local.get(t,f=>{i(f[t])})},[]),m("div",{className:"options-item"},m("span",null,chrome.i18n.getMessage(e)),o==="radio"&&r.map(f=>{let n=`${c}-${f.value.replace("_","-")}`;return m("div",{className:"options-item-option"},m("input",{type:"radio",name:c,id:n,value:f.value,checked:a===f.value,onClick:p}),m("label",{for:n},e==="root_folder"?f.name:chrome.i18n.getMessage(f.name)))}),o==="checkbox"&&m("input",{type:"checkbox",name:c,id:c,checked:a,onClick:v}))}s(ve,"OptionsItem");var dt=[{name:"open_in",storage:"openIn",type:"radio",options:[{name:"open_in_new",value:"new"},{name:"open_in_current",value:"current"},{name:"open_in_background",value:"background"}]},{name:"open_in_middle",storage:"openInMiddle",type:"radio",options:[{name:"open_in_new",value:"new"},{name:"open_in_current",value:"current"},{name:"open_in_background",value:"background"}]},{name:"do_not_close",storage:"doNotClose",type:"radio",options:[{name:"do_not_close_none",value:"none"},{name:"do_not_close_current",value:"current"},{name:"do_not_close_background",value:"background"},{name:"do_not_close_both",value:"both"}]},{name:"hover_enter",storage:"hoverEnter",type:"radio",options:[{name:"hover_enter_off",value:"off"},{name:"hover_enter_slow",value:"slow"},{name:"hover_enter_medium",value:"medium"},{name:"hover_enter_fast",value:"fast"}]},{name:"root_folder",storage:"root",type:"radio",options:[{name:"",value:"0"}]},{name:"color_theme",storage:"theme",type:"radio",options:[{name:"auto",value:"auto"},{name:"light",value:"light"},{name:"dark",value:"dark"}]},{name:"scroll_layout",storage:"scroll",type:"radio",options:[{name:"scroll_layout_y",value:"y"},{name:"scroll_layout_x",value:"x"}]},{name:"show_hidden",storage:"showHidden",type:"checkbox",options:[{name:"",value:!1}]}];function ke(){let[e,t]=C(dt);return N(()=>{let o=e.findIndex(r=>r.name==="root_folder");o>=0&&chrome.bookmarks.get("0",r=>{e[o].options=[],e[o].options.push({name:chrome.i18n.getMessage("home"),value:r[0].id}),chrome.bookmarks.getChildren("0",a=>{e[o].options.push(...a.map(i=>({name:i.title,value:i.id}))),t([...e])})})},[]),m("div",{className:"options-page"},e.map(o=>m(ve,S({},o))))}s(ke,"OptionsPage");var pt=s((e,t,o,r)=>{let[a,i]=C([]),[c,u]=C(e),[p,v]=C(t),f=s(()=>{a.filter(_=>_.active).forEach(_=>_.active=!1)},"hideLists"),n=s(()=>{let _=a.find(h=>h.type==="hidden");_||(_={type:"hidden",key:"",items:[],active:!1},a.push(_));let d=[],l=s(h=>{if(h.children!==null&&typeof h.children=="object")h.children.forEach(k=>{p.includes(k.id)&&d.push(k),l(k)});else return},"searchHidden");chrome.bookmarks.getTree(h=>{l(h[0]),_&&(_.items=d,f(),_.active=!0),i([...a])})},"loadHiddenList");return N(()=>{switch(c.type){case"folder":let _=a.find(l=>l.key===c.key);_?(f(),_.active=!0,i([...a])):chrome.bookmarks.getChildren(c.key,l=>{let h={type:"folder",key:c.key,active:!0,items:l};f(),i([...a,h])});break;case"search":let d=a.find(l=>l.type==="search");d||(d={type:"search",key:c.key,items:[],active:!1},a.push(d)),chrome.bookmarks.search(c.key,l=>{d&&(d.items=l,f(),d.active=!0),i([...a])});break;case"hidden":n();break;default:break}r()},[c]),N(()=>{c.type=="hidden"&&n()},[p]),N(()=>{if(console.log("\u66F4\u65B0removeBookmarksId:",o),o){let _=a.findIndex(l=>l.key===c.key),d=a[_];if(d){let l=d.items||[];l=l.filter(k=>k.id!==o)||[],d.items=l;let h=[...a];h[_]=d,i([...h])}}},[o]),[a,(_,d)=>{u(_),v(d)}]},"useBookmarks");function ne(e){let t=V(null),[o,r]=pt(e.page,e.hidden,e.removeBookmarksId,()=>{t.current&&t.current.scrollTo(0,0)}),[a,i]=M(L),c=a.scroll==="x",u=s(()=>{if(e.page.type==="options")return document.body.style.width="300px",300;{let n=o.find(l=>l.active),_=n?n.items.length:0,d=(Math.trunc((_-1)/18)+1)*200;return document.body.style.width=(d>800?800:d)+"px",(Math.trunc((_-1)/18)+1)*200}},"calcWidth"),p=s(n=>{c&&(n.preventDefault(),t.current&&(t.current.scrollLeft+=n.deltaY))},"onWheel"),v=null,f=s(()=>{t.current&&t.current.setAttribute("scroll",""),v&&clearTimeout(v),v=setTimeout(()=>{t.current&&t.current.removeAttribute("scroll")},400)},"onScroll");return N(()=>{o.length===1&&document.body.classList.remove("startup")},[o]),r(e.page,e.hidden),m("div",{className:`popup-container popup-container-${c?"horiz":"vert"}`,style:c?{width:u()+"px"}:{},onScroll:f,onWheel:p,ref:t},e.page.type==="options"?m(ke,null):o.map(n=>m(ge,{key:n.type==="search"?"search":n.key,active:n.active,horiz:c,list:n.items,hidden:e.hidden})))}s(ne,"PopupContainer");function re(e){let[t,o]=C("0"),r=M(T),[a,i]=M(L),c=s(v=>{v.currentTarget instanceof HTMLButtonElement&&v.currentTarget.blur(),e.page.type!="hidden"?(e.page.type==="folder"&&o(e.page.key),r("hidden","")):r("folder",t)},"onHiddenClick"),u=s(v=>{v.currentTarget instanceof HTMLButtonElement&&v.currentTarget.blur(),e.page.type!="options"?(e.page.type==="folder"&&o(e.page.key),r("options","")):chrome.storage.local.get(["openIn","openInMiddle","doNotClose","hoverEnter","startup","root","theme","scroll","hidden","showHidden"],f=>{i(f),r("folder",f.startup[0])})},"onOptionsClick"),p={id:"",type:"manage",title:chrome.i18n.getMessage("manage"),url:"chrome://bookmarks",active:!(e.hidden&&e.hidden.includes("manage"))};return m("div",{className:"popup-footer"},m(j,S({},p)),m("button",{className:`hidden-button hidden-button-${a.showHidden?"show":"hide"}`,onClick:c,title:chrome.i18n.getMessage("hidden_list")}),m("button",{className:"options-button options-button-show",onClick:u,title:chrome.i18n.getMessage("options")}))}s(re,"PopupFooter");function ie(e){let t=M(q),o=M(fe),[r]=M(L),[a,i]=C({id:"0",title:"",active:!0}),[c,u]=C([0,0]),[p,v]=C(!1),f=V(null),n=s(k=>{k.preventDefault();let g=[k.clientX,k.clientY],b=document.elementFromPoint(...g);if(!b)return;let w=b.closest(".bookmark-item");if(!w)return;let E=w.dataset.id;if(!E)return;let P=!w.matches(".bookmark-item-hide");chrome.bookmarks.get(E,H=>{if(H.length===0)return;let{id:D,title:Ye,url:Xe}=H[0];i({id:D,title:Ye,url:Xe,active:P})});let I=f.current;(!I||!I.clientWidth||!I.clientHeight)&&(I={clientWidth:140,clientHeight:120});let B=window.innerWidth-I.clientWidth-g[0],A=window.innerHeight-I.clientHeight-g[1];B<=5&&(g[0]=window.innerWidth-5-I.clientWidth),A<=5&&(g[1]=window.innerHeight-5-I.clientHeight),u(g),p||v(!0)},"handleContextMenu"),_=s(k=>{p&&v(!1)},"handleBlur");N(()=>(document.addEventListener("click",_),document.addEventListener("wheel",_),document.addEventListener("contextmenu",n),()=>{document.removeEventListener("click",_),document.removeEventListener("wheel",_),document.removeEventListener("contextmenu",n)}),[p,f]);let d=s(()=>{o(a.id),t({target:a.title,action:a.active?chrome.i18n.getMessage("set_hidden"):chrome.i18n.getMessage("set_hidden_off")})},"handleHideClick"),l=s(k=>{let g=!1;switch(k){case"new":g=!0;case"background":chrome.tabs.create({url:a.url,active:g}),r.doNotClose!="background"&&r.doNotClose!="both"&&window.close();break;case"current":default:chrome.tabs.update({url:a.url}),r.doNotClose!="current"&&r.doNotClose!="both"&&window.close();break}},"handleOpenURL"),h=s(()=>{a.url?chrome.bookmarks.remove(a.id,()=>{e.removeBookmarksCallback(a.id)}):chrome.bookmarks.removeTree(a.id,()=>{e.removeBookmarksCallback(a.id)})},"removeBookmarks");return m("ul",{className:`context-menu ${p?"show":"hide"}`,style:{top:c[1],left:c[0]},ref:f},a.url&&m(U,null,m("li",{onClick:()=>l("new")},chrome.i18n.getMessage("menu_open_in_new")),m("li",{onClick:()=>l("current")},chrome.i18n.getMessage("menu_open_in_current")),m("li",{onClick:()=>l("background")},chrome.i18n.getMessage("menu_open_in_background")),m("li",{className:"divider"})),m("li",{onClick:d},a.active?chrome.i18n.getMessage("menu_hide"):chrome.i18n.getMessage("menu_show")),m("li",{onClick:h},chrome.i18n.getMessage(a.url?"menu_remove_bookmarks":"menu_remove_bookmarks_tree")))}s(ie,"ContextMenu");function ft(e){let[t,o]=C(e.config),[r,a]=C({type:"folder",key:t.startup[0]}),[i,c]=C([]),[u,p]=C(t.hidden),[v,f]=C(""),n=s((k,g)=>{a({type:k,key:g})},"navigate"),_=s(k=>{c([...i,k])},"notify"),d=s(()=>{c([])},"clearMsg"),l=s(k=>{let g;u.includes(k)?g=u.filter(b=>b!=k):g=u.concat([k]),chrome.storage.local.set({hidden:g},()=>{p(g)})},"setItemHide"),h=s(k=>{console.log("\u66F4\u65B0\u6536\u85CF\u5939\u5217\u8868"),f(k)},"removeBookmarksCallback");return ht(t.theme),m(me,{nav:n,config:[t,o],notify:_,hide:l},m(oe,{page:r,msgs:i,clearMsg:d,horiz:t.scroll==="x"}),m(ne,{page:r,hidden:u,removeBookmarksId:v}),m(re,{page:r,hidden:u}),m(ie,{removeBookmarksCallback:h}))}s(ft,"Popup");chrome.storage.local.get(["openIn","openInMiddle","doNotClose","hoverEnter","startup","root","theme","scroll","hidden","showHidden"],e=>{mt(e.startup[1]),De(m(ft,{config:e}),document.body)});function mt(e){let t=document.documentElement.style,o=(e+2)*30;t.setProperty("--startup-height",o>600?"600px":o+"px")}s(mt,"adjustHeight");function ht(e){let t=document.documentElement,o=s(()=>{t.classList.add("theme-dark"),t.classList.remove("theme-light"),chrome.browserAction.setIcon({path:{"16":"/icons/qbm16-dark.png","32":"/icons/qbm32-dark.png"}})},"applyDarkTheme"),r=s(()=>{t.classList.add("theme-light"),t.classList.remove("theme-dark"),chrome.browserAction.setIcon({path:{"16":"/icons/qbm16.png","32":"/icons/qbm32.png"}})},"applyLightTheme");switch(e){case"light":r();break;case"dark":o();break;case"auto":default:let a=window.matchMedia("(prefers-color-scheme: dark)"),i=s(c=>{c.matches?o():r()},"colorSchemeTest");a.onchange=i,i(a);break}}s(ht,"applyTheme");
